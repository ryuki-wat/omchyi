{"ast":null,"code":"import _asyncToGenerator from \"E:/Ionic+angular TOTAcademy/OMCHYI/omchyi/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/data.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nfunction StaffPage_ion_card_7_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\\u0E1A\\u0E23\\u0E34\\u0E2B\\u0E32\\u0E23 :\", s_r1 == null ? null : s_r1.jobposition, \"\");\n  }\n}\nfunction StaffPage_ion_card_7_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\\u0E07\\u0E32\\u0E19 :\", s_r1 == null ? null : s_r1.job, \"\");\n  }\n}\nfunction StaffPage_ion_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 5)(1, \"ion-card-content\")(2, \"ion-thumbnail\");\n    i0.ɵɵelement(3, \"ion-img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-text\", 1)(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, StaffPage_ion_card_7_p_9_Template, 2, 1, \"p\", 7);\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, StaffPage_ion_card_7_p_12_Template, 2, 1, \"p\", 7);\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const s_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", s_r1 == null ? null : s_r1.picture);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u0E0A\\u0E37\\u0E48\\u0E2D \", s_r1 == null ? null : s_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1E\\u0E19\\u0E31\\u0E01\\u0E07\\u0E32\\u0E19 :\", s_r1 == null ? null : s_r1.code, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", s_r1.jobposition);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07 :\", s_r1 == null ? null : s_r1.position, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", s_r1.job);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"email :\", s_r1 == null ? null : s_r1.email, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u0E42\\u0E17\\u0E23 :\", s_r1 == null ? null : s_r1.mobile, \"\");\n  }\n}\nexport let StaffPage = /*#__PURE__*/(() => {\n  class StaffPage {\n    constructor(ds, loadingController) {\n      this.ds = ds;\n      this.loadingController = loadingController;\n      this.page = 1;\n      this.limit = 6;\n      this.Results = [];\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        //หมุนก่อน subscribe\n        _this.loading = yield _this.loadingController.create({\n          message: 'กำลังโหลด...'\n        });\n        yield _this.loading.present();\n        _this.getStaff();\n      })();\n    }\n    getStaff(event) {\n      var _this2 = this;\n      //get news again\n      this.sub = this.ds.getStaff(this.page, this.limit).subscribe(res => {\n        //console.log(res.data.pri565k)\n        this.pageTotal = res.data.totalPages;\n        this.totalItem = res.data.totalItems;\n        //this.Results=res.data.pri565k;\n        this.Results = this.Results.concat(res.data.staff);\n        //console.log(res.data)\n      }, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (error) {\n          //หายไปตอนerror\n          yield _this2.loading.dismiss(); //loading\n          //infinite scroll\n          if (event) {\n            event.target.complete();\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), /*#__PURE__*/_asyncToGenerator(function* () {\n        //หายไปตอนสมบูรณ์\n        yield _this2.loading.dismiss();\n        if (event) {\n          event.target.complete();\n        }\n      }));\n    }\n    doRefresh(event) {\n      //refresh ต้องมาหน้าแรก\n      this.page = 1;\n      this.Results = [];\n      //enable infinite scroll\n      if (this.event) {\n        this.event.target.disabled = false;\n      }\n      ;\n      //event.target.complete();\n      //refresh ให้ไปget news มาใหม่ ใส่ event หายโหลด\n      this.getStaff(event);\n    }\n    loadData(event) {\n      this.event = event;\n      this.page++;\n      //console.log(this.page)\n      //send event\n      this.getStaff(event);\n      //คำนวณหน้า ปัดเป็นจำนวนเต็ม\n      if (this.page == this.pageTotal) {\n        this.event.target.disabled = true;\n      }\n    }\n    ngOnDestroy() {\n      //clear memory\n      this.sub.unsubscribe();\n    }\n    static #_ = this.ɵfac = function StaffPage_Factory(t) {\n      return new (t || StaffPage)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.LoadingController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: StaffPage,\n      selectors: [[\"app-staff\"]],\n      decls: 8,\n      vars: 1,\n      consts: [[\"slot\", \"start\"], [\"color\", \"grey\"], [\"slot\", \"end\", \"src\", \"./assets/icon/logoNT1.png\"], [\"fullscreen\", \"\", 1, \"ion-padding\"], [\"color\", \"yellow\", 4, \"ngFor\", \"ngForOf\"], [\"color\", \"yellow\"], [3, \"src\"], [4, \"ngIf\"]],\n      template: function StaffPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n          i0.ɵɵelement(3, \"ion-menu-button\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(4, \"ion-title\")(5, \"ion-img\", 2);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"ion-content\", 3);\n          i0.ɵɵtemplate(7, StaffPage_ion_card_7_Template, 17, 8, \"ion-card\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.Results);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i2.IonButtons, i2.IonCard, i2.IonCardContent, i2.IonContent, i2.IonHeader, i2.IonImg, i2.IonMenuButton, i2.IonText, i2.IonThumbnail, i2.IonTitle, i2.IonToolbar]\n    });\n  }\n  return StaffPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}