{"ast":null,"code":"import _asyncToGenerator from \"E:/Ionic+angular TOTAcademy/OMCHYI/omchyi/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as HighCharts from 'highcharts';\nimport * as HighCharts2 from 'highcharts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/data.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nfunction SpcPage_ion_item_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 7)(1, \"ion-label\", 0)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-badge\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", r_r1 == null ? null : r_r1.province, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r1 == null ? null : r_r1.portcrm);\n  }\n}\nfunction SpcPage_ion_item_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 7)(1, \"ion-label\", 0)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-badge\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", r_r2 == null ? null : r_r2.province, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r2 == null ? null : r_r2.portcrm);\n  }\n}\nexport let SpcPage = /*#__PURE__*/(() => {\n  class SpcPage {\n    constructor(ds, loadingController) {\n      this.ds = ds;\n      this.loadingController = loadingController;\n      this.page = 1;\n      this.limit = 18;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        //หมุนก่อน subscribe\n        _this.loading = yield _this.loadingController.create({\n          message: 'กำลังโหลด...'\n        });\n        yield _this.loading.present();\n        _this.getSpc();\n      })();\n    }\n    getSpc(event) {\n      var _this2 = this;\n      //get spc again\n      //this.sub1 = this.ds.getCovidToday().subscribe((res:any)=>{\n      this.sub1 = this.ds.getSpc(this.page, this.limit).subscribe(res => {\n        // console.log(res[0].data.spc)\n        this.resultNorm = res[0].data.spc;\n        this.resultpub = res[1].data.spc;\n        this.spcnor = res[0].data.spc.map(data => [data.province, data.portcrm]);\n        this.spcpub = res[1].data.spc.map(data => [data.province, data.portcrm]);\n        ;\n        //console.log(this.spcnor)\n        //console.log(this.covidSum?.Gender.Female)\n        this.plotChart(this.spcnor);\n        this.plotChart2(this.spcpub);\n      }, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (error) {\n          //หายไปตอนerror loading\n          yield _this2.loading.dismiss();\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), /*#__PURE__*/_asyncToGenerator(function* () {\n        //หายไปตอนสมบูรณ์ loading\n        yield _this2.loading.dismiss();\n      }));\n    }\n    plotChart(n) {\n      let myChart = HighCharts.chart('highcharts', {\n        chart: {\n          type: 'column'\n        },\n        title: {\n          text: 'SPC Phone Summary'\n        },\n        /* subtitle: {\n          text: 'Source: <a>CRM</a>'\n        }, */\n        xAxis: {\n          type: 'category',\n          labels: {\n            rotation: -45,\n            style: {\n              fontSize: '8px',\n              fontFamily: 'Verdana, sans-serif'\n            }\n          }\n        },\n        yAxis: {\n          min: 0,\n          title: {\n            text: 'number'\n          }\n        },\n        credits: {\n          text: 'CRM'\n          //href: 'http://bms.intra.tot.co.th',\n        },\n        legend: {\n          enabled: false\n        },\n        tooltip: {\n          pointFormat: '{series.name}: <b>{point.y} number </b>',\n          style: {\n            color: 'grey'\n          }\n        },\n        series: [{\n          name: 'จังหวัด',\n          colorByPoint: true,\n          type: undefined,\n          data: n,\n          dataLabels: {\n            enabled: true,\n            rotation: -90,\n            //color: '#FFFFFF',\n            align: 'right',\n            format: '{point.y:.0f}',\n            // one decimal\n            y: -31,\n            // 10 pixels down from the top\n            style: {\n              fontSize: '8px',\n              fontFamily: 'Verdana, sans-serif'\n            }\n          }\n        }]\n      });\n    }\n    plotChart2(n) {\n      let myChart2 = HighCharts2.chart('highCharts', {\n        chart: {\n          type: 'column'\n        },\n        title: {\n          text: 'SPC interchange Phone Summary'\n        },\n        /*  subtitle: {\n           text: 'Source: <a>CRM</a>'\n        }, */\n        xAxis: {\n          type: 'category',\n          labels: {\n            rotation: -45,\n            style: {\n              fontSize: '8px',\n              fontFamily: 'Verdana, sans-serif'\n            }\n          }\n        },\n        yAxis: {\n          min: 0,\n          title: {\n            text: 'ชุมสาย'\n          }\n        },\n        legend: {\n          enabled: false\n        },\n        credits: {\n          text: 'CRM'\n          //href: 'http://bms.intra.tot.co.th'\n        },\n        tooltip: {\n          pointFormat: '{series.name}:<b>{point.y} ชุมสาย</b>',\n          style: {\n            color: 'grey'\n          }\n        },\n        series: [{\n          name: 'จังหวัด',\n          colorByPoint: true,\n          type: undefined,\n          data: n,\n          dataLabels: {\n            enabled: true,\n            rotation: -90,\n            //color: '#FFFFFF',\n            align: 'right',\n            format: '{point.y:.0f}',\n            // one decimal\n            y: -22,\n            // 10 pixels down from the top\n            style: {\n              fontSize: '8px',\n              fontFamily: 'Verdana, sans-serif'\n            }\n          }\n        }]\n      });\n    }\n    doRefresh(event) {\n      //refresh \n      //enable infinite scroll\n      event.target.complete();\n      //refresh ให้ไปget news มาใหม่ ใส่ event ให้หายโหลด\n      this.getSpc(event);\n    }\n    ngOnDestroy() {\n      //clear memory\n      this.sub1.unsubscribe();\n    }\n    static #_ = this.ɵfac = function SpcPage_Factory(t) {\n      return new (t || SpcPage)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.LoadingController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SpcPage,\n      selectors: [[\"app-spc\"]],\n      decls: 27,\n      vars: 2,\n      consts: [[\"color\", \"grey\"], [\"slot\", \"start\"], [\"text\", \"Back\", \"color\", \"grey\"], [\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"pullingIcon\", \"chevron-down-circle-outline\", \"pullingText\", \"Pull to refresh\", \"refreshingSpinner\", \"lines\", \"refreshingText\", \"Refreshing...\"], [\"id\", \"highcharts\"], [\"id\", \"highCharts\"], [\"color\", \"yellow\"], [\"color\", \"yellow\", 4, \"ngFor\", \"ngForOf\"], [\"color\", \"grey\", 1, \"chum\"]],\n      template: function SpcPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\", 0);\n          i0.ɵɵtext(3, \"SPC\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"ion-buttons\", 1);\n          i0.ɵɵelement(5, \"ion-back-button\", 2);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(6, \"ion-content\")(7, \"ion-refresher\", 3);\n          i0.ɵɵlistener(\"ionRefresh\", function SpcPage_Template_ion_refresher_ionRefresh_7_listener($event) {\n            return ctx.doRefresh($event);\n          });\n          i0.ɵɵelement(8, \"ion-refresher-content\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"ion-card\");\n          i0.ɵɵelement(10, \"div\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"ion-card\");\n          i0.ɵɵelement(12, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"ion-card\")(14, \"ion-list-header\", 7)(15, \"ion-label\", 0);\n          i0.ɵɵtext(16, \"\\u0E40\\u0E02\\u0E15\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"ion-button\", 0);\n          i0.ɵɵtext(18, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E40\\u0E25\\u0E02\\u0E2B\\u0E21\\u0E32\\u0E22\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(19, SpcPage_ion_item_19_Template, 6, 2, \"ion-item\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"ion-card\")(21, \"ion-list-header\", 7)(22, \"ion-label\", 0);\n          i0.ɵɵtext(23, \"\\u0E40\\u0E02\\u0E15\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"ion-button\", 0);\n          i0.ɵɵtext(25, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E0A\\u0E38\\u0E21\\u0E2A\\u0E32\\u0E22\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(26, SpcPage_ion_item_26_Template, 6, 2, \"ion-item\", 8);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(19);\n          i0.ɵɵproperty(\"ngForOf\", ctx.resultNorm);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.resultpub);\n        }\n      },\n      dependencies: [i3.NgForOf, i2.IonBadge, i2.IonButton, i2.IonButtons, i2.IonCard, i2.IonContent, i2.IonHeader, i2.IonItem, i2.IonLabel, i2.IonListHeader, i2.IonRefresher, i2.IonRefresherContent, i2.IonTitle, i2.IonToolbar, i2.IonBackButton]\n    });\n  }\n  return SpcPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}